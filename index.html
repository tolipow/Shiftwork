<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>سیستم بررسی شیفت‌های تاکسی</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🚕</text></svg>">
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap");
    body {
      margin: 0;
      font-family: "Vazirmatn", sans-serif;
      color: #fff;
      text-align: center;
      background-color: #333;
      background-image: linear-gradient(135deg, #000 0%, #333 100%);
      overflow-x: hidden;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
      position: relative;
    }
    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-image: linear-gradient(45deg, rgba(255, 204, 0, 0.1) 25%, transparent 25%), linear-gradient(-45deg, rgba(255, 204, 0, 0.1) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, rgba(255, 204, 0, 0.1) 75%), linear-gradient(-45deg, transparent 75%, rgba(255, 204, 0, 0.1) 75%);
      background-size: 50px 50px;
      background-position: 0 0, 0 50px, 50px -50px, -50px 0px;
      opacity: 0.8;
      z-index: -1;
    }
    header {
      width: 100%;
      max-width: 900px;
      padding: 15px 20px;
      font-weight: bold;
      background: rgba(0, 0, 0, 0.7);
      border-bottom: 2px solid #ffcc00;
      position: sticky;
      top: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    }
    .title {
      font-size: 2.3rem;
      color: #ffcc00;
      text-shadow: 0 0 15px #000, 0 0 25px #ffcc00;
      margin: 0;
    }
    .clock {
      font-size: 2rem;
      font-weight: bold;
      color: #fff200;
      text-shadow: 0 0 15px #000, 0 0 25px #ff8800;
      margin-top: 10px;
    }
    .section {
      width: 100%;
      max-width: 900px;
      background: rgba(34, 34, 34, 0.9);
      padding: 25px 30px;
      border-radius: 20px;
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
      margin-top: 25px;
      border: 1px solid #555;
    }
    #current-shifts {
      min-height: 150px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    #shift-list div {
      font-size: 1.2rem;
      padding: 8px 0;
      border-bottom: 1px dashed rgba(255, 255, 255, 0.3);
      display: flex;
      justify-content: center;
      align-items: center;
    }
    #shift-list div:last-child {
      border-bottom: none;
    }
    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 10px;
      margin-top: 20px;
      text-align: right;
    }
    th, td {
      padding: 12px 15px;
      vertical-align: middle;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    th {
      background-color: rgba(255, 204, 0, 0.8);
      color: #333;
      font-size: 1.1rem;
      font-weight: bold;
      text-align: center;
      border: none;
      padding: 15px;
    }
    td {
      background-color: rgba(51, 51, 51, 0.8);
      font-size: 1rem;
      color: #e0e0e0;
      border: none;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
      text-align: center;
    }
    tr:hover td {background-color: rgba(68, 68, 68, 0.8);}
    .taxi-logo-left,.taxi-logo-right {
      position: absolute;
      width: 100px;
      height: 100px;
      background-color: #ffcc00;
      border-radius: 50%;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 2em;
      color: #000;
      font-weight: bold;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
      animation: pulse 1.5s infinite alternate;
      box-shadow: 0 0 15px rgba(255, 204, 0, 0.7);
    }
    .taxi-logo-left {top: 200px;left: 50px;transform: rotate(-30deg);}
    .taxi-logo-right {top: 400px;right: 50px;transform: rotate(30deg);}
    @keyframes pulse {
      from {transform: scale(1);opacity: 0.9;}
      to {transform: scale(1.05);opacity: 1;}
    }
    @media (max-width: 768px) {
      .title {font-size: 1.8rem;}
      .clock {font-size: 1.5rem;}
      header {flex-direction: column;padding: 10px;}
      .section {padding: 15px 20px;}
      th, td {padding: 8px 10px;font-size: 0.9rem;}
      .taxi-logo-left,.taxi-logo-right {width: 80px;height: 80px;font-size: 1.5em;}
      .taxi-logo-left {top: 150px;left: 20px;}
      .taxi-logo-right {top: 300px;right: 20px;}
    }
  </style>
</head>
<body>
<header>
  <div class="title">سیستم بررسی شیفت‌های تاکسی</div>
</header>
<div class="taxi-logo-left">TAXI</div>
<div class="taxi-logo-right">TAXI</div>
<div class="section" id="current-shifts">
  <h2>شیفت فعلی</h2>
  <div id="shift-list"></div>
</div>
<div class="section">
  <h2>جدول کامل شیفت‌ها</h2>
  <table id="full-schedule">
    <thead>
      <tr>
        <th>نام</th><th>رنک</th><th>روز / حالت</th><th>ساعت</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
const shifts = [
  { name: "Danyall Abbasi", rank: "Taxi Director", times: [{ days: "همه روزها", start: "20:00", end: "23:00" }], vacation: false },
  { name: "Parham Azizi", rank: "Taxi Deputy Director", times: [{ days: "همه روزها", start: "12:00", end: "12:01" }], vacation: false },
  { name: "Taha Azizii", rank: "Taxi Deputy Director", times: [{ days: "همه روزها", start: "9:00", end: "12:00" }], vacation: false },
  { name: "Ahmad Aghai ", rank: "Taxi Attendant", times: [{ days: "همه روزها", start: "18:00", end: "21:00" }], vacation: false },
  { name: "Abbas Abbasi", rank: "Taxi Attendant", times: [{ days: "همه روزها", start: "12:00", end: "15:00" }], vacation: false },
  { name: "Parsa Rahimi", rank: "Taxi Attendant", times: [{ days: "همه روزها", start: "12:00", end: "15:00" }], vacation: false },
{ name: "Javad Hashiemy", rank: "Taxi Attendant", times: [{ days: "همه روزها", start: "15:00", end: "16:30" }], vacation: false },  
{ name: "Javad Hashiemy", rank: "Taxi Attendant", times: [{ days: "همه روزها", start: "19:00", end: "20:30" }], vacation: false },  

];
// عدد کمتر = رتبه بالاتر
const rankOrder = {
  "Taxi Director": 0
  "Taxi Deputy Director": 2
  "Taxi Attendant": 3
};
function $(s){return document.querySelector(s);}
function toPersianDigits(str){return String(str).replace(/\d/g,d=>"۰۱۲۳۴۵۶۷۸۹"[d]);}
function timeToMins(t){const [h,m]=t.split(":").map(Number);return h*60+m;}

function updateClock(){
  const now=new Date();
  const timeStr=`${String(now.getHours()).padStart(2,"0")}:${String(now.getMinutes()).padStart(2,"0")}:${String(now.getSeconds()).padStart(2,"0")}`;
  if(!$("#clock")){
    const clockEl=document.createElement("div");
    clockEl.id="clock";clockEl.className="clock";
    document.querySelector("header").appendChild(clockEl);
  }
  $("#clock").textContent=toPersianDigits(timeStr);
}

function renderFullSchedule() {
  const tbody=$("#full-schedule tbody");
  // جدا کردن دنیال
  const dany=shifts.filter(p=>p.name==="Danyall Abbasi");
  const others=shifts.filter(p=>p.name!=="Danyall Abbasi").slice().sort((a,b)=>(rankOrder[a.rank]||99)-(rankOrder[b.rank]||99));
  const all=[...dany,...others];
  tbody.innerHTML=all.map(p=>p.times.map(t=>`
    <tr>
      <td>${p.name}${p.vacation?" (مرخصی)":""}</td>
      <td>${p.rank}</td>
      <td>${t.days}</td>
      <td>${toPersianDigits(t.start)} تا ${toPersianDigits(t.end)}</td>
    </tr>`).join("")).join("");
}

function renderCurrentShifts(){
  const now=new Date();
  const curMins=now.getHours()*60+now.getMinutes();
  const active=[];
  shifts.forEach(p=>{
    if(p.vacation)return;
    p.times.forEach(t=>{
      const start=timeToMins(t.start),end=timeToMins(t.end);
      let inShift=false,remain=0;
      if(start<end){
        if(curMins>=start && curMins<end){inShift=true;remain=end-curMins;}
      }else{
        if(curMins>=start || curMins<end){
          inShift=true;remain=curMins>=start?(24*60-curMins)+end:end-curMins;
        }
      }
      if(inShift){
        const rh=Math.floor(remain/60),rm=remain%60;
        active.push({name:p.name,rank:rankOrder[p.rank]||99,text:`${p.name} (${p.rank}) ${rh>0?toPersianDigits(rh)+" ساعت و ":""}${toPersianDigits(rm)} دقیقه مانده`});
      }
    });
  });
  // دنیال بالا
  const dany=active.filter(a=>a.name==="Danyall Abbasi");
  const others=active.filter(a=>a.name!=="Danyall Abbasi").sort((a,b)=>a.rank-b.rank);
  const finalList=[...dany,...others];
  $("#shift-list").innerHTML=finalList.length?finalList.map(x=>`<div>${x.text}</div>`).join(""):"<div>در حال حاضر کسی در شیفت نیست</div>";
}

updateClock();
renderFullSchedule();
renderCurrentShifts();
setInterval(updateClock,1000);
setInterval(renderCurrentShifts,1000);
</script>
</body>
</html>



