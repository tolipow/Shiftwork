 
<!DOCTYPE html>
<html lang="fa" dir="rtl">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÙ… Ø¨Ø±Ø±Ø³ÛŒ Ø´ÛŒÙØªâ€ŒÙ‡Ø§ÛŒ ØªØ§Ú©Ø³ÛŒ</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸš•</text></svg>">
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;700&display=swap");
        body {
            margin: 0;
            font-family: "Vazirmatn", sans-serif;
            color: #fff;
            text-align: center;
            background-color: #333;
            /* Fallback for older browsers */
            background-image: linear-gradient(135deg, #000 0%, #333 100%);
            /* Darker gradient */
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
            position: relative;
            /* For the pattern */
        }
        
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: linear-gradient(45deg, rgba(255, 204, 0, 0.1) 25%, transparent 25%), linear-gradient(-45deg, rgba(255, 204, 0, 0.1) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, rgba(255, 204, 0, 0.1) 75%), linear-gradient(-45deg, transparent 75%, rgba(255, 204, 0, 0.1) 75%);
            background-size: 50px 50px;
            /* Size of the squares */
            background-position: 0 0, 0 50px, 50px -50px, -50px 0px;
            /* Offset to create the diamond pattern */
            opacity: 0.8;
            z-index: -1;
        }
        
        header {
            width: 100%;
            max-width: 900px;
            padding: 15px 20px;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.7);
            border-bottom: 2px solid #ffcc00;
            position: sticky;
            top: 20px;
            /* Keep a bit of space from the top */
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 15px;
            /* Rounded corners for header */
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            z-index: 100;
        }
        
        .title {
            font-size: 2.3rem;
            color: #ffcc00;
            text-shadow: 0 0 15px #000, 0 0 25px #ffcc00;
            margin: 0;
            /* Remove default margin */
        }
        
        .clock {
            font-size: 2rem;
            font-weight: bold;
            color: #fff200;
            text-shadow: 0 0 15px #000, 0 0 25px #ff8800;
        }
        
        .admin-btn {
            background: #ffcc00;
            color: #000;
            border: none;
            padding: 8px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        
        .admin-btn:hover {
            background-color: #e6b800;
            transform: scale(1.05);
        }
        
        .panel,
        .login-box,
        .section {
            width: 100%;
            max-width: 900px;
            background: rgba(34, 34, 34, 0.9);
            /* Slightly transparent dark background */
            padding: 25px 30px;
            border-radius: 20px;
            /* More rounded corners */
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.6);
            margin-top: 25px;
            /* Spacing between sections */
            border: 1px solid #555;
            /* Subtle border */
        }
        
        .panel,
        .login-box {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 1000;
            display: none;
            /* Hidden by default */
            border: 2px solid #ffcc00;
            /* Yellow border for pop-ups */
        }
        
        .panel h3,
        .login-box h3,
        .section h2 {
            color: #ffcc00;
            font-size: 1.8rem;
            margin-top: 0;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
        }
        
        .section {
            margin-bottom: 25px;
            /* Extra space at bottom of sections */
        }
        
        #current-shifts {
            min-height: 150px;
            /* Ensure some height even if no shifts */
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        #shift-list div {
            font-size: 1.2rem;
            padding: 8px 0;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.3);
            display: flex;
            justify-content: center;
            /* Center the text */
            align-items: center;
        }
        
        #shift-list div:last-child {
            border-bottom: none;
        }
        
        table {
            width: 100%;
            border-collapse: separate;
            /* Use separate to allow border-radius on cells */
            border-spacing: 0 10px;
            /* Space between rows */
            margin-top: 20px;
            text-align: right;
            /* Align text to right for Persian */
        }
        
        th,
        td {
            padding: 12px 15px;
            vertical-align: middle;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        th {
            background-color: rgba(255, 204, 0, 0.8);
            /* Yellow header background */
            color: #333;
            font-size: 1.1rem;
            font-weight: bold;
            text-align: center;
            /* Center header text */
            border: none;
            padding: 15px;
        }
        
        th:first-child {
            border-top-right-radius: 10px;
            border-bottom-right-radius: 10px;
        }
        
        th:last-child {
            border-top-left-radius: 10px;
            border-bottom-left-radius: 10px;
        }
        
        td {
            background-color: rgba(51, 51, 51, 0.8);
            /* Darker cell background */
            font-size: 1rem;
            color: #e0e0e0;
            border: none;
            border-radius: 8px;
            /* Rounded cells */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            text-align: center;
        }
        
        td:first-child {
            text-align: right;
            /* Name column alignment */
            padding-right: 25px;
        }
        
        td:last-child {
            text-align: left;
            /* Time column alignment */
            padding-left: 25px;
        }
        
        tr:hover td {
            background-color: rgba(68, 68, 68, 0.8);
            /* Slightly lighter on hover */
            cursor: pointer;
        }
        
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            /* Darker overlay */
            z-index: 999;
        }
        
        .login-box input,
        .panel button,
        .action-box select,
        .action-box input {
            padding: 10px 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            border: 1px solid #ffcc00;
            background-color: #333;
            color: #fff;
            font-size: 1rem;
            width: calc(100% - 30px);
            /* Adjust width */
            box-sizing: border-box;
            outline: none;
            transition: border-color 0.3s ease;
        }
        
        .login-box input:focus,
        .action-box input:focus {
            border-color: #fff200;
        }
        
        .panel button,
        .login-box button,
        #actionBox button {
            background: #ffcc00;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1.1rem;
            margin: 0 10px 10px 0;
            /* Adjust margin for buttons */
            width: auto;
            display: inline-block;
            /* Allow buttons to sit side-by-side */
            transition: background-color 0.3s ease, transform 0.2s ease;
        }
        
        .panel button:hover,
        .login-box button:hover,
        #actionBox button:hover {
            background-color: #e6b800;
            transform: scale(1.03);
        }
        
        #actionBox {
            text-align: center;
        }
        
        #actionBox select {
            width: calc(100% - 30px);
        }
        
        .taxi-logo-left,
        .taxi-logo-right {
            position: absolute;
            width: 100px;
            height: 100px;
            background-color: #ffcc00;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2em;
            color: #000;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
            animation: pulse 1.5s infinite alternate;
            /* Simple pulse animation */
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.7);
        }
        
        .taxi-logo-left {
            top: 200px;
            left: 50px;
            transform: rotate(-30deg);
        }
        
        .taxi-logo-right {
            top: 400px;
            right: 50px;
            transform: rotate(30deg);
        }
        
        @keyframes pulse {
            from {
                transform: scale(1);
                opacity: 0.9;
            }
            to {
                transform: scale(1.05);
                opacity: 1;
            }
        }
        /* Responsive adjustments */
        
        @media (max-width: 768px) {
            .title {
                font-size: 1.8rem;
            }
            .clock {
                font-size: 1.5rem;
            }
            header {
                flex-direction: column;
                padding: 10px;
            }
            .admin-btn {
                margin-top: 10px;
            }
            .panel,
            .login-box,
            .section {
                padding: 15px 20px;
            }
            th,
            td {
                padding: 8px 10px;
                font-size: 0.9rem;
            }
            .taxi-logo-left,
            .taxi-logo-right {
                width: 80px;
                height: 80px;
                font-size: 1.5em;
            }
            .taxi-logo-left {
                top: 150px;
                left: 20px;
            }
            .taxi-logo-right {
                top: 300px;
                right: 20px;
            }
        }
    </style>
</head>

<body>
    <header>
        <div class="title">Ø³ÛŒØ³ØªÙ… Ø¨Ø±Ø±Ø³ÛŒ Ø´ÛŒÙØªâ€ŒÙ‡Ø§ÛŒ ØªØ§Ú©Ø³ÛŒ</div>
        <div class="clock" id="clock"></div>
        <button class="admin-btn" onclick="openLogin()">Ù…Ø¯ÛŒØ±ÛŒØª</button>
    </header>

    <div class="taxi-logo-left">TAXI</div>
    <div class="taxi-logo-right">TAXI</div>

    <div class="overlay" id="overlay"></div>

    <div class="login-box" id="loginBox">
        <h3>ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±ÛŒØª</h3>
        <input type="text" id="username" placeholder="ÛŒÙˆØ²Ø±Ù†ÛŒÙ…"><br>
        <input type="password" id="password" placeholder="Ù¾Ø³ÙˆØ±Ø¯"><br>
        <button onclick="checkLogin()">ÙˆØ±ÙˆØ¯</button>
        <button onclick="closeLogin()">Ø¨Ø³ØªÙ†</button>
    </div>

    <div class="panel" id="adminPanel">
        <h3>Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª</h3>
        <button onclick="showVacation()">Ø§Ø¹Ù…Ø§Ù„/Ù„ØºÙˆ Ù…Ø±Ø®ØµÛŒ</button>
        <button onclick="showChangeTime()">ØªØºÛŒÛŒØ± ØªØ§ÛŒÙ…</button>
        <button onclick="closePanel()">Ø¨Ø³ØªÙ†</button>
    </div>

    <div id="actionBox" class="panel"></div>

    <div class="section" id="current-shifts">
        <h2>Ø´ÛŒÙØª ÙØ¹Ù„ÛŒ</h2>
        <div id="shift-list"></div>
    </div>

    <div class="section">
        <h2>Ø¬Ø¯ÙˆÙ„ Ú©Ø§Ù…Ù„ Ø´ÛŒÙØªâ€ŒÙ‡Ø§</h2>
        <table id="full-schedule">
            <thead>
                <tr>
                    <th>Ù†Ø§Ù…</th>
                    <th>Ø±Ù†Ú©</th>
                    <th>Ø±ÙˆØ² / Ø­Ø§Ù„Øª</th>
                    <th>Ø³Ø§Ø¹Øª</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <script>
        const shifts = [{
            name: "Danyall Abbasi",
            rank: "Taxi Director",
            times: [{
                days: "Ù‡Ù…Ù‡ Ø±ÙˆØ²Ù‡Ø§",
                start: "20:00",
                end: "23:00"
            }],
            vacation: false
        }, {
            name: "Kourosh Zabeti",
            rank: "Taxi Deputy Director",
            times: [{
                days: "Ù‡Ù…Ù‡ Ø±ÙˆØ²Ù‡Ø§",
                start: "14:00",
                end: "17:00"
            }],
            vacation: false
        }, {
            name: "Parham Azizi",
            rank: "Taxi Attendant",
            times: [{
                days: "Ù‡Ù…Ù‡ Ø±ÙˆØ²Ù‡Ø§",
                start: "12:00",
                end: "12:01"
            }],
            vacation: false
        }, {
            name: "Abbas Abbasi",
            rank: "Taxi Attendant",
            times: [{
                days: "Ù‡Ù…Ù‡ Ø±ÙˆØ²Ù‡Ø§",
                start: "12:00",
                end: "15:00"
            }],
            vacation: false
        }, {
            name: "Parsa Rahimi",
            rank: "Taxi Attendant",
            times: [{
                days: "Ù‡Ù…Ù‡ Ø±ÙˆØ²Ù‡Ø§",
                start: "12:00",
                end: "15:00"
            }],
            vacation: false
        }, {
            name: "Taha Azizii",
            rank: "Taxi Attendant",
            times: [{
                days: "Ù‡Ù…Ù‡ Ø±ÙˆØ²Ù‡Ø§",
                start: "9:00",
                end: "12:00"
            }],
            vacation: false
        }, {
            name: "Arya Khazeie",
            rank: "Taxi Attendant",
            times: [{
                days: "Ù‡Ù…Ù‡ Ø±ÙˆØ²Ù‡Ø§",
                start: "20:30",
                end: "23:30"
            }],
            vacation: false
        }];

        const rankOrder = {
            "Taxi Director": 1,
            "Taxi Deputy Director": 2,
            "Taxi Manager": 3,
            "Taxi Attendant": 4
        };

        function $(s) {
            return document.querySelector(s);
        }

        function toPersianDigits(str) {
            return String(str).replace(/\d/g, d => "Û°Û±Û²Û³Û´ÛµÛ¶Û·Û¸Û¹" [d]);
        }

        function timeToMins(t) {
            const [h, m] = t.split(":").map(Number);
            return h * 60 + m;
        }

        function updateClock() {
            const now = new Date();
            $("#clock").textContent = `${toPersianDigits(String(now.getHours()).padStart(2,"0"))}:${toPersianDigits(String(now.getMinutes()).padStart(2,"0"))}:${toPersianDigits(String(now.getSeconds()).padStart(2,"0"))}`;
        }

        function renderFullSchedule() {
            const tbody = $("#full-schedule tbody");
            tbody.innerHTML = shifts.slice().sort((a, b) => (rankOrder[a.rank] || 99) - (rankOrder[b.rank] || 99))
                .map(p => p.times.map(t => `
      <tr>
        <td>${p.name}${p.vacation?" (Ù…Ø±Ø®ØµÛŒ)":""}</td>
        <td>${p.rank}</td>
        <td>${t.days}</td>
        <td>${toPersianDigits(t.start)} ØªØ§ ${toPersianDigits(t.end)}</td>
      </tr>`).join(""))
                .join("");
        }

        function renderCurrentShifts() {
            const now = new Date();
            const curMins = now.getHours() * 60 + now.getMinutes();
            const active = [];
            shifts.forEach(p => {
                if (p.vacation) return;
                p.times.forEach(t => {
                    const start = timeToMins(t.start),
                        end = timeToMins(t.end);
                    // Handle shifts that cross midnight
                    if (start < end) { // Normal shift
                        if (curMins >= start && curMins < end) {
                            const remain = end - curMins;
                            const rh = Math.floor(remain / 60),
                                rm = remain % 60;
                            active.push(`${p.name} (${p.rank}) ${rh>0?toPersianDigits(rh)+" Ø³Ø§Ø¹Øª Ùˆ ":""}${toPersianDigits(rm)} Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø§Ù†Ø¯Ù‡`);
                        }
                    } else { // Shift crosses midnight (e.g., 20:00 to 03:00)
                        if (curMins >= start || curMins < end) {
                            let remain;
                            if (curMins >= start) { // Time before midnight
                                remain = (24 * 60 - curMins) + end;
                            } else { // Time after midnight
                                remain = end - curMins;
                            }
                            const rh = Math.floor(remain / 60),
                                rm = remain % 60;
                            active.push(`${p.name} (${p.rank}) ${rh>0?toPersianDigits(rh)+" Ø³Ø§Ø¹Øª Ùˆ ":""}${toPersianDigits(rm)} Ø¯Ù‚ÛŒÙ‚Ù‡ Ù…Ø§Ù†Ø¯Ù‡`);
                        }
                    }
                });
            });
            $("#shift-list").innerHTML = active.length ? active.map(x => `<div>${x}</div>`).join("") : "<div>Ø¯Ø± Ø­Ø§Ù„ Ø­Ø§Ø¶Ø± Ú©Ø³ÛŒ Ø¯Ø± Ø´ÛŒÙØª Ù†ÛŒØ³Øª</div>";
        }

        function openLogin() {
            $("#overlay").style.display = "block";
            $("#loginBox").style.display = "block";
        }

        function closeLogin() {
            $("#overlay").style.display = "none";
            $("#loginBox").style.display = "none";
        }

        function checkLogin() {
            const u = $("#username").value,
                p = $("#password").value;
            if (u === "Vigilante" && p === "021kid88") {
                closeLogin();
                openPanel();
            } else {
                alert("Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª!"); // More specific error
            }
        }

        function openPanel() {
            $("#overlay").style.display = "block";
            $("#adminPanel").style.display = "block";
        }

        function closePanel() {
            $("#overlay").style.display = "none";
            $("#adminPanel").style.display = "none";
            $("#actionBox").style.display = "none";
        }

        function showVacation() {
            let html = "<h3>Ø§Ø¹Ù…Ø§Ù„/Ù„ØºÙˆ Ù…Ø±Ø®ØµÛŒ</h3><select id='vacSel'>";
            shifts.forEach((p, i) => {
                html += `<option value='${i}'>${p.name} ${p.vacation ? '(Ø¯Ø± Ù…Ø±Ø®ØµÛŒ)' : ''}</option>` // Show current vacation status
            });
            html += "</select><br><br><button onclick='toggleVacation()'>ØªØ§ÛŒÛŒØ¯</button><button onclick='closeAction()'>Ø¨Ø³ØªÙ†</button>";
            $("#actionBox").innerHTML = html;
            $("#adminPanel").style.display = "none";
            $("#actionBox").style.display = "block";
        }

        function toggleVacation() {
            const i = document.getElementById("vacSel").value;
            shifts[i].vacation = !shifts[i].vacation;
            renderFullSchedule();
            renderCurrentShifts();
            closeAction();
        }

        function showChangeTime() {
            let html = "<h3>ØªØºÛŒÛŒØ± ØªØ§ÛŒÙ…</h3><select id='timeSel'>";
            shifts.forEach((p, i) => {
                html += `<option value='${i}'>${p.name}</option>`
            });
            html += "</select><br><br>Ø´Ø±ÙˆØ¹ (Ù…Ø«Ø§Ù„: 08:00):<input id='newStart' placeholder='HH:MM'><br>Ù¾Ø§ÛŒØ§Ù† (Ù…Ø«Ø§Ù„: 17:00):<input id='newEnd' placeholder='HH:MM'><br><br><button onclick='changeTime()'>ØªØ§ÛŒÛŒØ¯</button><button onclick='closeAction()'>Ø¨Ø³ØªÙ†</button>";
            $("#actionBox").innerHTML = html;
            $("#adminPanel").style.display = "none";
            $("#actionBox").style.display = "block";
        }

        function changeTime() {
            const i = document.getElementById("timeSel").value;
            const ns = document.getElementById("newStart").value;
            const ne = document.getElementById("newEnd").value.trim(); // Trim whitespace

            // Basic time format validation (HH:MM)
            const timeRegex = /^([01]?[0-9]|2[0-3]):[0-5][0-9]$/;

            if (!timeRegex.test(ns) || !timeRegex.test(ne)) {
                alert("ÙØ±Ù…Øª Ø³Ø§Ø¹Øª ØµØ­ÛŒØ­ Ù†ÛŒØ³Øª. Ù„Ø·ÙØ§ Ø§Ø² ÙØ±Ù…Øª HH:MM Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ (Ù…Ø«Ø§Ù„: Û°Û¸:Û°Û°).");
                return; // Stop execution if format is wrong
            }

            // Update only the first shift time for simplicity
            if (shifts[i].times.length > 0) {
                shifts[i].times[0].start = ns;
                shifts[i].times[0].end = ne;
            } else {
                // If for some reason there are no existing times, add one
                shifts[i].times.push({
                    days: "Ù‡Ù…Ù‡ Ø±ÙˆØ²Ù‡Ø§",
                    start: ns,
                    end: ne
                });
            }

            renderFullSchedule();
            renderCurrentShifts();
            closeAction();
        }

        function closeAction() {
            $("#actionBox").style.display = "none";
            openPanel();
        }

        // Initial calls and intervals
        updateClock();
        renderFullSchedule();
        renderCurrentShifts();
        setInterval(updateClock, 1000);
        setInterval(renderCurrentShifts, 1000);
    </script>
</body>

</html>

